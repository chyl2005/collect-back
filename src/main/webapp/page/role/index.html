<div class="row" id="table">
    <div class="col-xs-12">
        <user-table>

        </user-table>
    </div><!-- /.span -->
</div>


<script type="text/x-template" id="table-template">
    <table id="simple-table" class="table  table-bordered table-hover">
        <thead>
        <tr>
            <th class="center">
                <label class="pos-rel">
                    <input type="checkbox" class="ace">
                    <span class="lbl"></span>
                </label>
            </th>
            <th>账号</th>
            <th>姓名</th>
            <th class="hidden-480">角色</th>

            <th>
                <i class="ace-icon fa fa-clock-o bigger-110 hidden-480"></i>
                注册时间
            </th>
            <th>状态</th>
            <th>操作</th>
        </tr>
        </thead>


        <tbody>
        <tr v-for="item in userList">
            <td class="center">
                <label class="pos-rel">
                    <input type="checkbox" class="ace">
                    <span class="lbl"></span>
                </label>
            </td>
            <td> {{item.userName}}</td>
            <td>{{item.trueName}}</td>
            <td class="hidden-480">{{item.roleName}}</td>
            <td>{{item.gmtCreated}}</td>
            <td>{{item.status}}</td>

            <td>
                <div class="hidden-sm hidden-xs btn-group">
                    <button class="btn btn-xs btn-success">
                        <i class="ace-icon fa fa-check bigger-120"></i>
                    </button>

                    <button class="btn btn-xs btn-info">
                        <i class="ace-icon fa fa-pencil bigger-120"></i>
                    </button>

                    <button class="btn btn-xs btn-danger">
                        <i class="ace-icon fa fa-trash-o bigger-120"></i>
                    </button>

                    <button class="btn btn-xs btn-warning">
                        <i class="ace-icon fa fa-flag bigger-120"></i>
                    </button>
                </div>


            </td>
        </tr>
        </tbody>
    </table>
</script>

<script type="text/javascript">
    Vue.component('user-table', {
        template: '#table-template',
        data: function () {
            var datas = {
                userList: [],
                pageCur: 1,
                pageSize: 10,
                url: "/back/user/list"
            };
            return datas;
        },
        created: function () {
            this.loadData();
        },
        methods: {
            //加载数据
            loadData: function () {
                var startRow = (this.pageCur - 1) * this.pageSize;
                this.$http.post(this.url, {'pageSize': this.pageSize, 'startRow': startRow}, {emulateJSON: true}).then(response => {
                    if ( response.body.data.datas!=null&&response.body.data.datas.length!=null){
                        response.body.data.datas.forEach((item) => {
                            var data={};
                            data.userId=item.userId;
                            data.userName=item.userName;
                            data.trueName=item.trueName;
                            data.gmtCreated=getSmpFormatDateByLong(item.gmtCreated,true);
                            data.status=item.isDel==0?"未刪除":"已刪除";
                            this.userList.push(data);
                        });

                    }
                    console.log(JSON.stringify(JSON.stringify(this.userList)))
                }, response => {

                });
            }
        }
    });


    // start app
    new Vue({
        el: '#table'
    })
</script>